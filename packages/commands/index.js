var l=Object.defineProperty,M=Object.getOwnPropertyDescriptor,v=Object.getOwnPropertyNames,y=Object.prototype.hasOwnProperty,r=(e,t)=>l(e,"name",{value:t,configurable:!0}),O=(e,t)=>{for(var a in t)l(e,a,{get:t[a],enumerable:!0})},x=(e,t,a,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of v(t))y.call(e,n)||n===a||l(e,n,{get:()=>t[n],enumerable:!(s=M(t,n))||s.enumerable});return e},D=e=>x(l({},"__esModule",{value:!0}),e),_={};O(_,{ChatInputCommand:()=>d,ChatInputCommandData:()=>c,CommandManager:()=>h,CommandOption:()=>p}),module.exports=D(_);var w=require("util"),d=class{static{r(this,"ChatInputCommand")}author;member;guild_id;channel;locale;guild_locale;data;id;application_id;token;constructor(e){this.author=e.member?.user??e.user,this.member=e.member??null,this.guild_id=e.guild_id??null,this.channel=e.channel,this.locale=e.locale,this.guild_locale=e.guild_locale??null,2===e.type&&(this.data=new c(e.data)),this.id=e.id,this.application_id=e.application_id,this.token=e.token}},c=class{static{r(this,"ChatInputCommandData")}users;members;roles;channels;messages;attachments;options;constructor(e){this.users=new Map(Object.entries(e.resolved?.users??{})),this.members=new Map(Object.entries(e.resolved?.members??{})),this.roles=new Map(Object.entries(e.resolved?.roles??{})),this.channels=new Map(Object.entries(e.resolved?.channels??{})),this.attachments=new Map(Object.entries(e.resolved?.attachments??{})),this.options=new Map(e.options?.map(e=>[e.name,new p(e)])??[])}},p=class e{static{r(this,"CommandOption")}options;value;constructor(t){this.options=new Map(t.options?.map(t=>[t.name,new e(t)])),this.value=t.value??null}asString(){return this.value}asNumber(){return this.value}asBoolean(){return this.value}},h=class{constructor(e,t){this.paramGetter=e,this.errorHandler=t}static{r(this,"CommandManager")}commands=new Map;categories=new Map;assign(e){e.forEach(e=>{this.commands.get(e.name)&&this.commands.delete(e.name),this.commands.set(e.name,e),this.categories.forEach(t=>{t.includes(e.name)&&t.splice(t.indexOf(e.name),1)});let t=this.categories.get(e.category);t?t.includes(e.name)||t.push(e.name):this.categories.set(e.category,[e.name])})}remove(e){for(let t of e)this.commands.get(t)&&(this.commands.delete(t),this.categories.forEach(e=>{e.includes(t)&&e.splice(e.indexOf(t),1)}))}handle(e,t){return!!this.commands.has(e.data?.name)&&(setImmediate(async()=>{let a=this.paramGetter(e),s;try{await t?.interaction.createInteractionResponse(e.id,e.token,{type:5}),s=this.commands.get(e.data.name).process(...a)}catch(n){t&&t.interaction.createFollowupMessage(e.application_id,e.token,{content:"There was an error"}).catch(()=>{}),this.errorHandler?.(n)}s instanceof Promise&&s.catch(e=>this.errorHandler?.(e))}),!0)}};
//# sourceMappingURL=index.js.map
