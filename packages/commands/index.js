var r=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var s=(n,e)=>r(n,"name",{value:e,configurable:!0});var I=(n,e)=>{for(var t in e)r(n,t,{get:e[t],enumerable:!0})},A=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of h(e))!g.call(n,a)&&a!==t&&r(n,a,{get:()=>e[a],enumerable:!(i=b(e,a))||i.enumerable});return n};var P=n=>A(r({},"__esModule",{value:!0}),n);var M={};I(M,{ChatInputCommand:()=>u,ChatInputCommandData:()=>o,CommandManager:()=>d,CommandOption:()=>l,ContextMenuCommand:()=>m,ContextMenuCommandData:()=>p});module.exports=P(M);var u=class{static{s(this,"ChatInputCommand")}author;member;guild_id;channel;locale;guild_locale;data;id;application_id;token;app_permissions;constructor(e){this.author=e.member?.user??e.user,this.member=e.member??null,this.guild_id=e.guild_id??null,this.channel=e.channel,this.locale=e.locale,this.guild_locale=e.guild_locale??null,this.data=new o(e.data),this.id=e.id,this.application_id=e.application_id,this.token=e.token,this.app_permissions=e.app_permissions}},o=class{static{s(this,"ChatInputCommandData")}users;members;roles;channels;messages;attachments;options;constructor(e){this.users=new Map(Object.entries(e.resolved?.users??{})),this.members=new Map(Object.entries(e.resolved?.members??{})),this.roles=new Map(Object.entries(e.resolved?.roles??{})),this.channels=new Map(Object.entries(e.resolved?.channels??{})),this.attachments=new Map(Object.entries(e.resolved?.attachments??{})),this.options=new Map(e.options?.map(t=>[t.name,new l(t)])??[])}},l=class n{static{s(this,"CommandOption")}options;value;constructor(e){this.options=new Map(e.options?.map(t=>[t.name,new n(t)])),this.value=e.value??null}asString(){return this.value}asNumber(){return this.value}asBoolean(){return this.value}},m=class{static{s(this,"ContextMenuCommand")}author;member;guild_id;channel;locale;guild_locale;data;target;id;application_id;token;app_permissions;constructor(e){this.author=e.member?.user??e.user,this.member=e.member??null,this.guild_id=e.guild_id??null,this.channel=e.channel,this.locale=e.locale,this.guild_locale=e.guild_locale??null,this.data=new p(e.data),this.target=e.data.target_id,this.id=e.id,this.application_id=e.application_id,this.token=e.token,this.app_permissions=e.app_permissions}},p=class{static{s(this,"ContextMenuCommandData")}target_id;users=new Map;members=new Map;messages=new Map;constructor(e){this.target_id=e.target_id,e.type===2?(this.users=new Map(Object.entries(e.resolved.users)),this.members=new Map(Object.entries(e.resolved.members??{}))):this.messages=new Map(Object.entries(e.resolved.messages))}},d=class{constructor(e,t){this.paramGetter=e;this.errorHandler=t}static{s(this,"CommandManager")}commands=new Map;categories=new Map;assign(e){e.forEach(t=>{this.commands.get(t.name)&&this.commands.delete(t.name),this.commands.set(t.name,t),this.categories.forEach(a=>{a.includes(t.name)&&a.splice(a.indexOf(t.name),1)});let i=this.categories.get(t.category);i?i.includes(t.name)||i.push(t.name):this.categories.set(t.category,[t.name])})}remove(e){for(let t of e)this.commands.get(t)&&(this.commands.delete(t),this.categories.forEach(i=>{i.includes(t)&&i.splice(i.indexOf(t),1)}))}handle(e,t){return this.commands.has(e.data?.name)?(setImmediate(async()=>{let i=this.paramGetter(e),a;try{await t?.interaction.createInteractionResponse(e.id,e.token,{type:5}),a=this.commands.get(e.data.name).process(...i)}catch(c){this.errorHandler?.(c)}a instanceof Promise&&a.catch(c=>this.errorHandler?.(c))}),!0):!1}};0&&(module.exports={ChatInputCommand,ChatInputCommandData,CommandManager,CommandOption,ContextMenuCommand,ContextMenuCommandData});
//# sourceMappingURL=index.js.map